version: 6.41.1

type: DeclarativeSource

check:
  type: CheckStream
  stream_names:
    - profiles

definitions:
  streams:
    profiles:
      type: DeclarativeStream
      retriever:
        type: SimpleRetriever
        requester:
          use_cache: true
          $ref: "#/definitions/base_requester"
          path: v2/profiles?profileTypeFilter=seller,vendor
          http_method: GET
          request_headers:
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
      name: profiles
      primary_key:
        - profileId
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/profiles"
    profiles_filtered:
      type: DeclarativeStream
      retriever:
        type: SimpleRetriever
        requester:
          use_cache: true
          $ref: "#/definitions/base_requester"
          path: v2/profiles?profileTypeFilter=seller,vendor
          http_method: GET
          request_headers:
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
          record_filter:
            type: RecordFilter
            condition: >-
              {{ record["profileId"] in config.get("profiles", []) or
              record["accountInfo"]["marketplaceStringId"] in
              config.get("marketplace_ids", []) if config.get("profiles", []) or
              config.get("marketplace_ids", []) else True }}
      name: profiles_filtered
      primary_key:
        - profileId
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/profiles_filtered"
    portfolios:
      type: DeclarativeStream
      name: portfolios
      primary_key:
        - portfolioId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: portfolios/list
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            includeExtendedDataFields: "true"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - portfolios
          schema_normalization: Default
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          pagination_strategy:
            type: CursorPagination
            cursor_value: "{{ response.get(\"nextToken\", {}) }}"
            stop_condition: "{{ not response.get(\"nextToken\", {}) }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - creationDate
              value: >-
                {{ (format_datetime(record['extendedData']['creationDateTime'],
                '%s') | int * 1000) +
                (format_datetime(record['extendedData']['creationDateTime'],
                '%f')[:3] | int) }}
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - lastUpdatedDate
              value: >-
                {{
                (format_datetime(record['extendedData']['lastUpdateDateTime'],
                '%s') | int * 1000) +
                (format_datetime(record['extendedData']['lastUpdateDateTime'],
                '%f')[:3] | int) }}
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - servingStatus
              value: "{{ record['extendedData']['servingStatus'] }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - statusReasons
              value: "{{ record['extendedData']['statusReasons'] }}"
        - type: RemoveFields
          field_pointers:
            - - extendedData
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/portfolios"
    sponsored_display_campaigns:
      type: DeclarativeStream
      retriever:
        type: SimpleRetriever
        requester:
          request_params:
            stateFilter: "{{ ','.join(config['state_filter']) }}"
          $ref: "#/definitions/base_requester"
          path: sd/campaigns
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            field_name: startIndex
            inject_into: request_parameter
          page_size_option:
            type: RequestOption
            field_name: count
            inject_into: request_parameter
          pagination_strategy:
            type: OffsetIncrement
            page_size: 100
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      name: sponsored_display_campaigns
      primary_key:
        - campaignId
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_campaigns"
    sponsored_display_ad_groups:
      type: DeclarativeStream
      name: sponsored_display_ad_groups
      primary_key:
        - adGroupId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sd/adGroups
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            field_name: startIndex
            inject_into: request_parameter
          page_size_option:
            type: RequestOption
            field_name: count
            inject_into: request_parameter
          pagination_strategy:
            type: OffsetIncrement
            page_size: 100
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_ad_groups"
    sponsored_display_product_ads:
      type: DeclarativeStream
      name: sponsored_display_product_ads
      primary_key:
        - adId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sd/productAds
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            field_name: startIndex
            inject_into: request_parameter
          page_size_option:
            type: RequestOption
            field_name: count
            inject_into: request_parameter
          pagination_strategy:
            type: OffsetIncrement
            page_size: 100
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_product_ads"
    sponsored_display_targetings:
      type: DeclarativeStream
      name: sponsored_display_targetings
      primary_key:
        - targetId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sd/targets
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            field_name: startIndex
            inject_into: request_parameter
          page_size_option:
            type: RequestOption
            field_name: count
            inject_into: request_parameter
          pagination_strategy:
            type: OffsetIncrement
            page_size: 100
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_targetings"
    sponsored_display_creatives:
      type: DeclarativeStream
      name: sponsored_display_creatives
      primary_key:
        - creativeId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sd/creatives
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            field_name: startIndex
            inject_into: request_parameter
          page_size_option:
            type: RequestOption
            field_name: count
            inject_into: request_parameter
          pagination_strategy:
            type: OffsetIncrement
            page_size: 100
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_creatives"
    sponsored_display_budget_rules:
      type: DeclarativeStream
      name: sponsored_display_budget_rules
      primary_key:
        - ruleId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sp/budgetRules
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - budgetRulesForAdvertiserResponse
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            field_name: startIndex
            inject_into: request_parameter
          page_size_option:
            type: RequestOption
            field_name: pageSize
            inject_into: request_parameter
          pagination_strategy:
            type: OffsetIncrement
            page_size: 30
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_budget_rules"
    sponsored_brands_keywords:
      type: DeclarativeStream
      name: sponsored_brands_keywords
      primary_key:
        - adGroupId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sb/keywords
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            field_name: startIndex
            inject_into: request_parameter
          page_size_option:
            type: RequestOption
            field_name: count
            inject_into: request_parameter
          pagination_strategy:
            type: OffsetIncrement
            page_size: 100
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_brands_keywords"
    sponsored_brands_campaigns:
      type: DeclarativeStream
      name: sponsored_brands_campaigns
      primary_key:
        - campaignId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sb/v4/campaigns/list
          http_method: POST
          request_headers:
            Accept: application/vnd.sbcampaignresource.v4+json
            Content-Type: application/vnd.sbcampaignresource.v4+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            stateFilter: " {{ {'include': ','.join(config['state_filter'])} if config['state_filter'] else None }} "
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - campaigns
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_brands_campaigns"
    sponsored_brands_ad_groups:
      type: DeclarativeStream
      name: sponsored_brands_ad_groups
      primary_key:
        - adGroupId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sb/v4/adGroups/list
          http_method: POST
          request_headers:
            Accept: application/vnd.sbadgroupresource.v4+json
            Content-Type: application/vnd.sbadgroupresource.v4+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - adGroups
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_brands_ad_groups"
    sponsored_product_campaigns:
      type: DeclarativeStream
      name: sponsored_product_campaigns
      primary_key:
        - campaignId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sp/campaigns/list
          http_method: POST
          request_headers:
            Accept: application/vnd.spCampaign.v3+json
            Content-Type: application/vnd.spCampaign.v3+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            stateFilter: " {{ {'include': ','.join(config['state_filter'])} if config['state_filter'] else None }} "
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - campaigns
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_campaigns"
    sponsored_product_ad_groups:
      type: DeclarativeStream
      name: sponsored_product_ad_groups
      primary_key:
        - adGroupId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /sp/adGroups/list
          http_method: POST
          request_headers:
            Accept: application/vnd.spAdGroup.v3+json
            Content-Type: application/vnd.spAdGroup.v3+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - adGroups
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_ad_groups"
    sponsored_product_keywords:
      type: DeclarativeStream
      name: sponsored_product_keywords
      primary_key:
        - keywordId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sp/keywords/list
          http_method: POST
          request_headers:
            Accept: application/vnd.spKeyword.v3+json
            Content-Type: application/vnd.spKeyword.v3+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - keywords
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_keywords"
    sponsored_product_negative_keywords:
      type: DeclarativeStream
      name: sponsored_product_negative_keywords
      primary_key:
        - keywordId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sp/negativeKeywords/list
          http_method: POST
          request_headers:
            Accept: application/vnd.spNegativeKeyword.v3+json
            Content-Type: application/vnd.spNegativeKeyword.v3+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - negativeKeywords
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_negative_keywords"
    sponsored_product_campaign_negative_keywords:
      type: DeclarativeStream
      name: sponsored_product_campaign_negative_keywords
      primary_key:
        - keywordId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sp/campaignNegativeKeywords/list
          http_method: POST
          request_headers:
            Accept: application/vnd.spCampaignNegativeKeyword.v3+json
            Content-Type: application/vnd.spCampaignNegativeKeyword.v3+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - campaignNegativeKeywords
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_campaign_negative_keywords"
    sponsored_product_ads:
      type: DeclarativeStream
      name: sponsored_product_ads
      primary_key:
        - adId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sp/productAds/list
          http_method: POST
          request_headers:
            Accept: application/vnd.spProductAd.v3+json
            Content-Type: application/vnd.spProductAd.v3+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - productAds
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_ads"
    sponsored_product_targetings:
      type: DeclarativeStream
      name: sponsored_product_targetings
      primary_key:
        - targetId
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: sp/targets/list
          http_method: POST
          request_headers:
            Accept: application/vnd.spTargetingClause.v3+json
            Content-Type: application/vnd.spTargetingClause.v3+json
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - targetingClauses
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_targetings"
    sponsored_product_ad_group_bid_recommendations:
      type: DeclarativeStream
      name: sponsored_product_ad_group_bid_recommendations
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /sp/targets/bid/recommendations
          http_method: POST
          request_headers:
            Accept: application/vnd.spthemebasedbidrecommendation.v4+json
            Content-Type: application/vnd.spthemebasedbidrecommendation.v4+json
            Amazon-Advertising-API-Scope: "{{ stream_slice.parent_slice['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            adGroupId: "{{ stream_slice[\"adGroupId\"] }}"
            campaignId: "{{ stream_slice.extra_fields[\"campaignId\"] }}"
            recommendationType: BIDS_FOR_EXISTING_AD_GROUP
            targetingExpressions:
              - type: CLOSE_MATCH
              - type: LOOSE_MATCH
              - type: SUBSTITUTES
              - type: COMPLEMENTS
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 400
                error_message: >-
                  Skip current AdGroup because it does not support request
                  {response.request.url} for current profile
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 422
                error_message: >-
                  Skip current AdGroup because the ad group
                  {json.loads(response.request.body)['adGroupId']} does not have
                  any asins
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 404
                error_message: >-
                  Skip current AdGroup because the specified ad group has no
                  associated bid
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: nextToken
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: maxResults
          pagination_strategy:
            type: CursorPagination
            page_size: 100
            cursor_value: "{{ response.nextToken }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              stream:
                $ref: "#/definitions/streams/sponsored_product_ad_groups"
              parent_key: adGroupId
              extra_fields:
                - - campaignId
              partition_field: adGroupId
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - adGroupId
              value: "{{ stream_slice[\"adGroupId\"] }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - campaignId
              value: "{{ stream_slice.extra_fields[\"campaignId\"] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_ad_group_bid_recommendations"
    sponsored_product_ad_group_suggested_keywords:
      type: DeclarativeStream
      retriever:
        type: SimpleRetriever
        requester:
          request_params:
            maxNumSuggestions: 100
          $ref: "#/definitions/base_requester"
          path: v2/sp/adGroups/{{ stream_slice['adGroupId'] }}/suggested/keywords
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_slice.parent_slice['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 400
                error_message: >-
                  Skip current AdGroup because it does not support request
                  {response.request.url} for current profile
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 422
                error_message: >-
                  Skip current AdGroup because the ad group
                  {json.loads(response.request.body)['adGroupId']} does not have
                  any asins
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 404
                error_message: >-
                  Skip current AdGroup because the specified ad group has no
                  associated bid
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              stream:
                $ref: "#/definitions/streams/sponsored_product_ad_groups"
              parent_key: adGroupId
              extra_fields:
                - - campaignId
              partition_field: adGroupId
      name: sponsored_product_ad_group_suggested_keywords
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_product_ad_group_suggested_keywords"
    attribution_report_products:
      type: DeclarativeStream
      name: attribution_report_products
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /attribution/report
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            endDate: >-
              "{{
              format_datetime(today_with_timezone(stream_slice.extra_fields['timezone']).strftime('%Y%m%d'),
              '%Y%m%d', '%Y%m%d') }}"
            metrics: |
              {{
                ','.join([
                'attributedDetailPageViewsClicks14d',
                'attributedAddToCartClicks14d',
                'attributedPurchases14d',
                'unitsSold14d',
                'attributedSales14d',
                'brandHaloDetailPageViewsClicks14d',
                'brandHaloAttributedAddToCartClicks14d',
                'brandHaloAttributedPurchases14d',
                'brandHaloUnitsSold14d',
                'brandHaloAttributedSales14d',
                'attributedNewToBrandPurchases14d',
                'attributedNewToBrandUnitsSold14d',
                'attributedNewToBrandSales14d',
                'brandHaloNewToBrandPurchases14d',
                'brandHaloNewToBrandUnitsSold14d',
                'brandHaloNewToBrandSales14d',
                ])
              }}
            startDate: >-
              {%- set _start_date = config.get("start_date") -%} {%- set
              start_date =
              today_with_timezone(stream_slice.extra_fields["timezone"]) -%} {%-
              set end_date =
              today_with_timezone(stream_slice.extra_fields["timezone"]) -%} "{{
              start_date.strftime("%Y%m%d") if not config.get("start_date") else
              max(format_datetime(config['start_date'], "%Y%m%d"), (end_date -
              duration("P90D")).strftime("%Y%m%d")) | string }}"
            reportType: PRODUCTS
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: IGNORE
                predicate: >-
                  {{ response.message == "This profileID is not authorized to
                  use Amazon Attribution" }}
                error_message: "{{ response }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
              - type: HttpResponseFilter
                action: IGNORE
                predicate: "{{ 'code' in response and 'details' in response }}"
                error_message: "{{ response.code }}; {{ response.details }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - reports
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: cursorId
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: count
          pagination_strategy:
            type: CursorPagination
            page_size: 300
            cursor_value: "{{ response.cursorId }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
              parent_key: profileId
              extra_fields:
                - - timezone
              partition_field: profileId
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/attribution_report_products"
    attribution_report_performance_adgroup:
      type: DeclarativeStream
      name: attribution_report_performance_adgroup
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /attribution/report
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            endDate: >-
              "{{
              format_datetime(today_with_timezone(stream_slice.extra_fields['timezone']).strftime('%Y%m%d'),
              '%Y%m%d', '%Y%m%d') }}"
            groupBy: ADGROUP
            metrics: |
              {{
                ','.join([
                'Click-throughs',
                'attributedDetailPageViewsClicks14d',
                'attributedAddToCartClicks14d',
                'attributedPurchases14d',
                'unitsSold14d',
                'attributedSales14d',
                'attributedTotalDetailPageViewsClicks14d',
                'attributedTotalAddToCartClicks14d',
                'attributedTotalPurchases14d',
                'totalUnitsSold14d',
                'totalAttributedSales14d',
                'brb_bonus_amount'
                ])
              }}
            startDate: >-
              {%- set _start_date = config.get("start_date") -%} {%- set
              start_date =
              today_with_timezone(stream_slice.extra_fields["timezone"]) -%} {%-
              set end_date =
              today_with_timezone(stream_slice.extra_fields["timezone"]) -%} "{{
              start_date.strftime("%Y%m%d") if not config.get("start_date") else
              max(format_datetime(config['start_date'], "%Y%m%d"), (end_date -
              duration("P90D")).strftime("%Y%m%d")) | string }}"
            reportType: PERFORMANCE
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 400
                error_message: "{{ response }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - reports
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: cursorId
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: count
          pagination_strategy:
            type: CursorPagination
            page_size: 300
            cursor_value: "{{ response.cursorId }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
              parent_key: profileId
              extra_fields:
                - - timezone
              partition_field: profileId
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/attribution_report_performance_adgroup"
    attribution_report_performance_campaign:
      type: DeclarativeStream
      name: attribution_report_performance_campaign
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /attribution/report
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            endDate: >-
              "{{
              format_datetime(today_with_timezone(stream_slice.extra_fields['timezone']).strftime('%Y%m%d'),
              '%Y%m%d', '%Y%m%d') }}"
            groupBy: CAMPAIGN
            metrics: |
              {{
                ','.join([
                'Click-throughs',
                'attributedDetailPageViewsClicks14d',
                'attributedAddToCartClicks14d',
                'attributedPurchases14d',
                'unitsSold14d',
                'attributedSales14d',
                'attributedTotalDetailPageViewsClicks14d',
                'attributedTotalAddToCartClicks14d',
                'attributedTotalPurchases14d',
                'totalUnitsSold14d',
                'totalAttributedSales14d',
                'brb_bonus_amount'
                ])
              }}
            startDate: >-
              {%- set _start_date = config.get("start_date") -%} {%- set
              start_date =
              today_with_timezone(stream_slice.extra_fields["timezone"]) -%} {%-
              set end_date =
              today_with_timezone(stream_slice.extra_fields["timezone"]) -%} "{{
              start_date.strftime("%Y%m%d") if not config.get("start_date") else
              max(format_datetime(config['start_date'], "%Y%m%d"), (end_date -
              duration("P90D")).strftime("%Y%m%d")) | string }}"
            reportType: PERFORMANCE
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 400
                error_message: "{{ response }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - reports
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: cursorId
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: count
          pagination_strategy:
            type: CursorPagination
            page_size: 300
            cursor_value: "{{ response.cursorId }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
              parent_key: profileId
              extra_fields:
                - - timezone
              partition_field: profileId
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/attribution_report_performance_campaign"
    attribution_report_performance_creative:
      type: DeclarativeStream
      name: attribution_report_performance_creative
      retriever:
        type: SimpleRetriever
        requester:
          $ref: "#/definitions/base_requester"
          path: /attribution/report
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            endDate: >-
              "{{
              format_datetime(today_with_timezone(stream_slice.extra_fields['timezone']).strftime('%Y%m%d'),
              '%Y%m%d', '%Y%m%d') }}"
            groupBy: CREATIVE
            metrics: |
              {{
                ','.join([
                'Click-throughs',
                'attributedDetailPageViewsClicks14d',
                'attributedAddToCartClicks14d',
                'attributedPurchases14d',
                'unitsSold14d',
                'attributedSales14d',
                'attributedTotalDetailPageViewsClicks14d',
                'attributedTotalAddToCartClicks14d',
                'attributedTotalPurchases14d',
                'totalUnitsSold14d',
                'totalAttributedSales14d',
                ])
              }}
            startDate: >-
              {%- set _start_date = config.get("start_date") -%} {%- set
              start_date =
              today_with_timezone(stream_slice.extra_fields["timezone"]) -%} {%-
              set end_date =
              today_with_timezone(stream_slice.extra_fields["timezone"]) -%} "{{
              start_date.strftime("%Y%m%d") if not config.get("start_date") else
              max(format_datetime(config['start_date'], "%Y%m%d"), (end_date -
              duration("P90D")).strftime("%Y%m%d")) | string }}"
            reportType: PERFORMANCE
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: IGNORE
                http_codes:
                  - 400
                error_message: "{{ response }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'message' in response }}"
                error_message: "{{ response.message }}"
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path:
              - reports
        paginator:
          type: DefaultPaginator
          page_token_option:
            type: RequestOption
            inject_into: body_json
            field_name: cursorId
          page_size_option:
            type: RequestOption
            inject_into: body_json
            field_name: count
          pagination_strategy:
            type: CursorPagination
            page_size: 300
            cursor_value: "{{ response.cursorId }}"
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
              parent_key: profileId
              extra_fields:
                - - timezone
              partition_field: profileId
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/attribution_report_performance_creative"
    sponsored_brands_v3_report_stream:
      type: DeclarativeStream
      name: sponsored_brands_v3_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: purchasedAsin report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - campaignBudgetCurrencyCode
                - campaignName
                - adGroupName
                - attributionType
                - purchasedAsin
                - productName
                - productCategory
                - sales14d
                - orders14d
                - unitsSold14d
                - newToBrandSales14d
                - newToBrandPurchases14d
                - newToBrandUnitsSold14d
                - newToBrandSalesPercentage14d
                - newToBrandPurchasesPercentage14d
                - newToBrandUnitsSoldPercentage14d
              filters: []
              groupBy:
                - purchasedAsin
              timeUnit: SUMMARY
              adProduct: SPONSORED_BRANDS
              reportTypeId: sbPurchasedProduct
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - purchasedAsin
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_brands_v3_report_stream"
    sponsored_display_campaigns_report_stream:
      type: DeclarativeStream
      name: sponsored_display_campaigns_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: campaigns report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - addToCart
                - addToCartClicks
                - addToCartRate
                - addToCartViews
                - addToList
                - addToListFromClicks
                - addToListFromViews
                - qualifiedBorrows
                - qualifiedBorrowsFromClicks
                - qualifiedBorrowsFromViews
                - royaltyQualifiedBorrows
                - royaltyQualifiedBorrowsFromClicks
                - royaltyQualifiedBorrowsFromViews
                - brandedSearches
                - brandedSearchesClicks
                - brandedSearchesViews
                - brandedSearchRate
                - campaignBudgetCurrencyCode
                - campaignId
                - campaignName
                - clicks
                - cost
                - detailPageViews
                - detailPageViewsClicks
                - eCPAddToCart
                - eCPBrandSearch
                - endDate
                - impressions
                - impressionsViews
                - leadFormOpens
                - leads
                - linkOuts
                - newToBrandPurchases
                - newToBrandPurchasesClicks
                - newToBrandSalesClicks
                - newToBrandUnitsSold
                - newToBrandUnitsSoldClicks
                - purchases
                - purchasesClicks
                - purchasesPromotedClicks
                - sales
                - salesClicks
                - salesPromotedClicks
                - startDate
                - unitsSold
                - unitsSoldClicks
                - videoCompleteViews
                - videoFirstQuartileViews
                - videoMidpointViews
                - videoThirdQuartileViews
                - videoUnmutes
                - viewabilityRate
                - viewClickThroughRate
                - campaignBudgetAmount
                - campaignStatus
                - costType
                - cumulativeReach
                - impressionsFrequencyAverage
                - newToBrandDetailPageViewClicks
                - newToBrandDetailPageViewRate
                - newToBrandDetailPageViews
                - newToBrandDetailPageViewViews
                - newToBrandECPDetailPageView
                - newToBrandSales
              filters: []
              groupBy:
                - campaign
              timeUnit: SUMMARY
              adProduct: SPONSORED_DISPLAY
              reportTypeId: sdCampaigns
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - campaignId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_campaigns_report_stream"
    sponsored_display_adgroups_report_stream:
      type: DeclarativeStream
      name: sponsored_display_adgroups_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: adGroups report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - addToCart
                - addToCartClicks
                - addToCartRate
                - addToCartViews
                - adGroupId
                - adGroupName
                - addToList
                - addToListFromClicks
                - addToListFromViews
                - qualifiedBorrows
                - qualifiedBorrowsFromClicks
                - qualifiedBorrowsFromViews
                - royaltyQualifiedBorrows
                - royaltyQualifiedBorrowsFromClicks
                - royaltyQualifiedBorrowsFromViews
                - bidOptimization
                - brandedSearches
                - brandedSearchesClicks
                - brandedSearchesViews
                - brandedSearchRate
                - campaignBudgetCurrencyCode
                - campaignId
                - campaignName
                - clicks
                - cost
                - detailPageViews
                - detailPageViewsClicks
                - eCPAddToCart
                - eCPBrandSearch
                - endDate
                - impressions
                - impressionsViews
                - leadFormOpens
                - leads
                - linkOuts
                - newToBrandPurchases
                - newToBrandPurchasesClicks
                - newToBrandSales
                - newToBrandSalesClicks
                - newToBrandUnitsSold
                - newToBrandUnitsSoldClicks
                - purchases
                - purchasesClicks
                - purchasesPromotedClicks
                - sales
                - salesClicks
                - salesPromotedClicks
                - startDate
                - unitsSold
                - unitsSoldClicks
                - videoCompleteViews
                - videoFirstQuartileViews
                - videoMidpointViews
                - videoThirdQuartileViews
                - videoUnmutes
                - viewabilityRate
                - viewClickThroughRate
                - cumulativeReach
                - impressionsFrequencyAverage
                - newToBrandDetailPageViewClicks
                - newToBrandDetailPageViewRate
                - newToBrandDetailPageViews
                - newToBrandDetailPageViewViews
                - newToBrandECPDetailPageView
              filters: []
              groupBy:
                - adGroup
              timeUnit: SUMMARY
              adProduct: SPONSORED_DISPLAY
              reportTypeId: sdAdGroup
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - adGroupId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_adgroups_report_stream"
    sponsored_display_productads_report_stream:
      type: DeclarativeStream
      name: sponsored_display_productads_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: productAds report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - addToCart
                - addToCartRate
                - addToCartViews
                - addToCartClicks
                - adGroupId
                - adGroupName
                - adId
                - addToList
                - addToListFromClicks
                - qualifiedBorrows
                - royaltyQualifiedBorrows
                - addToListFromViews
                - qualifiedBorrowsFromClicks
                - qualifiedBorrowsFromViews
                - royaltyQualifiedBorrowsFromClicks
                - royaltyQualifiedBorrowsFromViews
                - bidOptimization
                - brandedSearches
                - brandedSearchesClicks
                - brandedSearchesViews
                - brandedSearchRate
                - campaignBudgetCurrencyCode
                - campaignId
                - campaignName
                - clicks
                - cost
                - cumulativeReach
                - detailPageViews
                - detailPageViewsClicks
                - eCPAddToCart
                - eCPBrandSearch
                - endDate
                - impressions
                - impressionsFrequencyAverage
                - impressionsViews
                - leadFormOpens
                - leads
                - linkOuts
                - newToBrandDetailPageViewClicks
                - newToBrandDetailPageViewRate
                - newToBrandDetailPageViews
                - newToBrandDetailPageViewViews
                - newToBrandECPDetailPageView
                - newToBrandPurchases
                - newToBrandPurchasesClicks
                - newToBrandSales
                - newToBrandSalesClicks
                - newToBrandUnitsSold
                - newToBrandUnitsSoldClicks
                - promotedAsin
                - promotedSku
                - purchases
                - purchasesClicks
                - purchasesPromotedClicks
                - sales
                - salesClicks
                - salesPromotedClicks
                - startDate
                - unitsSold
                - unitsSoldClicks
                - videoCompleteViews
                - videoFirstQuartileViews
                - videoMidpointViews
                - videoThirdQuartileViews
                - videoUnmutes
                - viewabilityRate
                - viewClickThroughRate
              filters: []
              groupBy:
                - advertiser
              timeUnit: SUMMARY
              adProduct: SPONSORED_DISPLAY
              reportTypeId: sdAdvertisedProduct
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - adId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_productads_report_stream"
    sponsored_display_targets_report_stream:
      type: DeclarativeStream
      name: sponsored_display_targets_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: targets report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - addToCart
                - addToCartClicks
                - addToCartRate
                - addToCartViews
                - adGroupId
                - adGroupName
                - addToList
                - addToListFromClicks
                - addToListFromViews
                - qualifiedBorrows
                - qualifiedBorrowsFromClicks
                - qualifiedBorrowsFromViews
                - royaltyQualifiedBorrows
                - royaltyQualifiedBorrowsFromClicks
                - royaltyQualifiedBorrowsFromViews
                - brandedSearches
                - brandedSearchesClicks
                - brandedSearchesViews
                - brandedSearchRate
                - campaignBudgetCurrencyCode
                - campaignId
                - campaignName
                - clicks
                - cost
                - detailPageViews
                - detailPageViewsClicks
                - eCPAddToCart
                - eCPBrandSearch
                - endDate
                - impressions
                - impressionsViews
                - leadFormOpens
                - leads
                - linkOuts
                - newToBrandPurchases
                - newToBrandPurchasesClicks
                - newToBrandSales
                - newToBrandSalesClicks
                - newToBrandUnitsSold
                - newToBrandUnitsSoldClicks
                - purchases
                - purchasesClicks
                - purchasesPromotedClicks
                - sales
                - salesClicks
                - salesPromotedClicks
                - startDate
                - targetingExpression
                - targetingId
                - targetingText
                - unitsSold
                - unitsSoldClicks
                - videoCompleteViews
                - videoFirstQuartileViews
                - videoMidpointViews
                - videoThirdQuartileViews
                - videoUnmutes
                - viewabilityRate
                - viewClickThroughRate
              filters: []
              groupBy:
                - targeting
              timeUnit: SUMMARY
              adProduct: SPONSORED_DISPLAY
              reportTypeId: sdTargeting
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - targetingId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_targets_report_stream"
    sponsored_display_asins_report_stream:
      type: DeclarativeStream
      name: sponsored_display_asins_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: asins report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - adGroupId
                - adGroupName
                - asinBrandHalo
                - addToList
                - addToListFromClicks
                - qualifiedBorrowsFromClicks
                - royaltyQualifiedBorrowsFromClicks
                - addToListFromViews
                - qualifiedBorrows
                - qualifiedBorrowsFromViews
                - royaltyQualifiedBorrows
                - royaltyQualifiedBorrowsFromViews
                - campaignBudgetCurrencyCode
                - campaignId
                - campaignName
                - conversionsBrandHalo
                - conversionsBrandHaloClicks
                - endDate
                - promotedAsin
                - promotedSku
                - salesBrandHalo
                - salesBrandHaloClicks
                - startDate
                - unitsSoldBrandHalo
                - unitsSoldBrandHaloClicks
              filters: []
              groupBy:
                - asin
              timeUnit: SUMMARY
              adProduct: SPONSORED_DISPLAY
              reportTypeId: sdPurchasedProduct
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - promotedAsin
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_display_asins_report_stream"
    sponsored_products_campaigns_report_stream:
      type: DeclarativeStream
      name: sponsored_products_campaigns_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: campaigns report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - campaignName
                - campaignId
                - campaignStatus
                - campaignBudgetAmount
                - campaignRuleBasedBudgetAmount
                - campaignApplicableBudgetRuleId
                - campaignApplicableBudgetRuleName
                - impressions
                - clicks
                - cost
                - purchases1d
                - purchases7d
                - purchases14d
                - purchases30d
                - purchasesSameSku1d
                - purchasesSameSku7d
                - purchasesSameSku14d
                - purchasesSameSku30d
                - unitsSoldClicks1d
                - unitsSoldClicks7d
                - unitsSoldClicks14d
                - unitsSoldClicks30d
                - sales1d
                - sales7d
                - sales14d
                - sales30d
                - attributedSalesSameSku1d
                - attributedSalesSameSku7d
                - attributedSalesSameSku14d
                - attributedSalesSameSku30d
                - unitsSoldSameSku1d
                - unitsSoldSameSku7d
                - unitsSoldSameSku14d
                - unitsSoldSameSku30d
              filters: []
              groupBy:
                - campaign
              timeUnit: SUMMARY
              adProduct: SPONSORED_PRODUCTS
              reportTypeId: spCampaigns
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - campaignId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_products_campaigns_report_stream"
    sponsored_products_adgroups_report_stream:
      type: DeclarativeStream
      name: sponsored_products_adgroups_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: adGroups report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - campaignName
                - campaignId
                - adGroupName
                - adGroupId
                - impressions
                - clicks
                - cost
                - purchases1d
                - purchases7d
                - purchases14d
                - purchases30d
                - purchasesSameSku1d
                - purchasesSameSku7d
                - purchasesSameSku14d
                - purchasesSameSku30d
                - unitsSoldClicks1d
                - unitsSoldClicks7d
                - unitsSoldClicks14d
                - unitsSoldClicks30d
                - sales1d
                - sales7d
                - sales14d
                - sales30d
                - attributedSalesSameSku1d
                - attributedSalesSameSku7d
                - attributedSalesSameSku14d
                - attributedSalesSameSku30d
                - unitsSoldSameSku1d
                - unitsSoldSameSku7d
                - unitsSoldSameSku14d
                - unitsSoldSameSku30d
              filters: []
              groupBy:
                - campaign
                - adGroup
              timeUnit: SUMMARY
              adProduct: SPONSORED_PRODUCTS
              reportTypeId: spCampaigns
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - adGroupId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_products_adgroups_report_stream"
    sponsored_products_keywords_report_stream:
      type: DeclarativeStream
      name: sponsored_products_keywords_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: keywords report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - campaignName
                - campaignId
                - adGroupName
                - adGroupId
                - keywordId
                - keyword
                - matchType
                - impressions
                - clicks
                - cost
                - purchases1d
                - purchases7d
                - purchases14d
                - purchases30d
                - purchasesSameSku1d
                - purchasesSameSku7d
                - purchasesSameSku14d
                - purchasesSameSku30d
                - unitsSoldClicks1d
                - unitsSoldClicks7d
                - unitsSoldClicks14d
                - unitsSoldClicks30d
                - sales1d
                - sales7d
                - sales14d
                - sales30d
                - attributedSalesSameSku1d
                - attributedSalesSameSku7d
                - attributedSalesSameSku14d
                - attributedSalesSameSku30d
                - unitsSoldSameSku1d
                - unitsSoldSameSku7d
                - unitsSoldSameSku14d
                - unitsSoldSameSku30d
              filters:
                - field: keywordType
                  values:
                    - BROAD
                    - PHRASE
                    - EXACT
              groupBy:
                - targeting
              timeUnit: SUMMARY
              adProduct: SPONSORED_PRODUCTS
              reportTypeId: spTargeting
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - keywordId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_products_keywords_report_stream"
    sponsored_products_targets_report_stream:
      type: DeclarativeStream
      name: sponsored_products_targets_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: targets report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - campaignName
                - campaignId
                - adGroupName
                - adGroupId
                - keywordId
                - keyword
                - targeting
                - keywordType
                - impressions
                - clicks
                - cost
                - purchases1d
                - purchases7d
                - purchases14d
                - purchases30d
                - purchasesSameSku1d
                - purchasesSameSku7d
                - purchasesSameSku14d
                - purchasesSameSku30d
                - unitsSoldClicks1d
                - unitsSoldClicks7d
                - unitsSoldClicks14d
                - unitsSoldClicks30d
                - sales1d
                - sales7d
                - sales14d
                - sales30d
                - attributedSalesSameSku1d
                - attributedSalesSameSku7d
                - attributedSalesSameSku14d
                - attributedSalesSameSku30d
                - unitsSoldSameSku1d
                - unitsSoldSameSku7d
                - unitsSoldSameSku14d
                - unitsSoldSameSku30d
              filters:
                - field: keywordType
                  values:
                    - TARGETING_EXPRESSION
                    - TARGETING_EXPRESSION_PREDEFINED
              groupBy:
                - targeting
              timeUnit: SUMMARY
              adProduct: SPONSORED_PRODUCTS
              reportTypeId: spTargeting
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - keywordId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_products_targets_report_stream"
    sponsored_products_productads_report_stream:
      type: DeclarativeStream
      name: sponsored_products_productads_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: productAds report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - campaignName
                - campaignId
                - adGroupName
                - adGroupId
                - adId
                - impressions
                - clicks
                - cost
                - campaignBudgetCurrencyCode
                - advertisedAsin
                - purchases1d
                - purchases7d
                - purchases14d
                - purchases30d
                - purchasesSameSku1d
                - purchasesSameSku7d
                - purchasesSameSku14d
                - purchasesSameSku30d
                - unitsSoldClicks1d
                - unitsSoldClicks7d
                - unitsSoldClicks14d
                - unitsSoldClicks30d
                - sales1d
                - sales7d
                - sales14d
                - sales30d
                - attributedSalesSameSku1d
                - attributedSalesSameSku7d
                - attributedSalesSameSku14d
                - attributedSalesSameSku30d
                - unitsSoldSameSku1d
                - unitsSoldSameSku7d
                - unitsSoldSameSku14d
                - unitsSoldSameSku30d
              filters: []
              groupBy:
                - advertiser
              timeUnit: SUMMARY
              adProduct: SPONSORED_PRODUCTS
              reportTypeId: spAdvertisedProduct
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - adId
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_products_productads_report_stream"
    sponsored_products_asins_keywords_report_stream:
      type: DeclarativeStream
      name: sponsored_products_asins_keywords_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: asins_keywords report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - campaignName
                - campaignId
                - adGroupName
                - adGroupId
                - keywordId
                - keyword
                - advertisedAsin
                - purchasedAsin
                - advertisedSku
                - campaignBudgetCurrencyCode
                - matchType
                - unitsSoldClicks1d
                - unitsSoldClicks7d
                - unitsSoldClicks14d
                - unitsSoldClicks30d
                - unitsSoldOtherSku1d
                - unitsSoldOtherSku7d
                - unitsSoldOtherSku14d
                - unitsSoldOtherSku30d
                - salesOtherSku1d
                - salesOtherSku7d
                - salesOtherSku14d
                - salesOtherSku30d
              filters: []
              groupBy:
                - asin
              timeUnit: SUMMARY
              adProduct: SPONSORED_PRODUCTS
              reportTypeId: spPurchasedProduct
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - advertisedAsin
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_products_asins_keywords_report_stream"
    sponsored_products_asins_targets_report_stream:
      type: DeclarativeStream
      name: sponsored_products_asins_targets_report_stream
      retriever:
        type: AsyncRetriever
        record_selector:
          type: RecordSelector
          extractor:
            type: DpathExtractor
            field_path: []
        status_mapping:
          failed:
            - FAILED
          running:
            - PENDING
            - PROCESSING
          timeout:
            - timeout
          completed:
            - COMPLETED
        status_extractor:
          type: DpathExtractor
          field_path:
            - status
        download_target_extractor:
          type: DpathExtractor
          field_path:
            - url
        partition_router:
          type: SubstreamPartitionRouter
          parent_stream_configs:
            - type: ParentStreamConfig
              parent_key: profileId
              partition_field: profileId
              stream:
                $ref: "#/definitions/streams/profiles_filtered"
        creation_requester:
          type: HttpRequester
          url_base: |-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]] }}/reporting/reports
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: POST
          request_headers:
            Amazon-Advertising-API-Scope: "{{ stream_partition['profileId'] }}"
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          request_body_json:
            name: asins_targets report {{ stream_interval.start_time }}
            endDate: "{{ stream_interval.end_time }}"
            startDate: "{{ stream_interval.start_time }}"
            configuration:
              format: GZIP_JSON
              columns:
                - campaignName
                - campaignId
                - adGroupName
                - adGroupId
                - advertisedAsin
                - purchasedAsin
                - advertisedSku
                - campaignBudgetCurrencyCode
                - matchType
                - unitsSoldClicks1d
                - unitsSoldClicks7d
                - unitsSoldClicks14d
                - unitsSoldClicks30d
                - unitsSoldOtherSku1d
                - unitsSoldOtherSku7d
                - unitsSoldOtherSku14d
                - unitsSoldOtherSku30d
                - salesOtherSku1d
                - salesOtherSku7d
                - salesOtherSku14d
                - salesOtherSku30d
                - keywordId
                - targeting
                - keywordType
              filters: []
              groupBy:
                - asin
              timeUnit: SUMMARY
              adProduct: SPONSORED_PRODUCTS
              reportTypeId: spPurchasedProduct
          error_handler:
            type: DefaultErrorHandler
            response_filters:
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'KDP authors do not have access to Sponsored Brands
                  functionality' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Not authorized to access scope' in response.details }}"
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: >-
                  {{ 'Tactic T00020 is not supported for report API in
                  marketplace' in response.details }}
                error_message: "{{ response.details }}"
              - type: HttpResponseFilter
                action: FAIL
                predicate: "{{ 'Report date is too far in the past' in response.details }}"
                error_message: "{{ response.details }}"
        polling_requester:
          type: HttpRequester
          url_base: >-
            {%- set URL_MAPPING = {
                "NA": "https://advertising-api.amazon.com/",
                "EU": "https://advertising-api-eu.amazon.com/",
                "FE": "https://advertising-api-fe.amazon.com/"
            } -%} {{ URL_MAPPING[config["region"]]
            }}/reporting/reports/{{stream_slice['create_job_response'].json()['reportId']}}
          authenticator:
            type: OAuthAuthenticator
            client_id: "{{ config[\"client_id\"] }}"
            grant_type: refresh_token
            client_secret: "{{ config[\"client_secret\"] }}"
            refresh_token: "{{ config[\"refresh_token\"] }}"
            refresh_request_body: {}
            token_refresh_endpoint: https://api.amazon.com/auth/o2/token
          http_method: GET
          request_headers:
            Amazon-Advertising-API-Scope: >-
              {{
              stream_slice['create_job_response'].request.headers['Amazon-Advertising-API-Scope']
              }}
            Amazon-Advertising-API-ClientId: "{{ config[\"client_id\"] }}"
          error_handler:
            type: CompositeErrorHandler
            error_handlers:
              - type: DefaultErrorHandler
                max_retries: 5
                response_filters:
                  - type: HttpResponseFilter
                    action: RETRY
                    http_codes:
                      - 401
                    error_message: >-
                      Unauthorized error while report status checking. Known
                      error. Please, retry the request or restart sync.
        download_requester:
          type: HttpRequester
          url_base: test_base/{{stream_slice.extra_fields['url']}}
          http_method: GET
      primary_key:
        - profileId
        - reportDate
        - adGroupName
        - advertisedAsin
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: reportDate
        lookback_window: P{{ config.get('look_back_window', 3) }}D
        cursor_datetime_formats:
          - "%Y-%m-%d"
        datetime_format: "%Y-%m-%d"
        start_datetime:
          type: MinMaxDatetime
          datetime: "{{ config.get('start_date', today_utc().strftime('%Y-%m-%d') ) }}"
          datetime_format: "%Y-%m-%d"
        start_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: startDate
        end_time_option:
          type: RequestOption
          inject_into: body_json
          field_name: endDate
        end_datetime:
          type: MinMaxDatetime
          datetime: "{{ today_utc() }}"
          datetime_format: "%Y-%m-%d"
        step: P{{ config.get('events_time_step', 30) }}D
        cursor_granularity: P1D
      transformations:
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - reportDate
              value: "{{ stream_interval.end_time }}"
        - type: AddFields
          fields:
            - type: AddedFieldDefinition
              path:
                - profileId
              value: "{{ stream_partition['profileId'] }}"
      schema_loader:
        type: InlineSchemaLoader
        schema:
          $ref: "#/schemas/sponsored_products_asins_targets_report_stream"
  base_requester:
    type: HttpRequester
    url_base: |-
      {%- set URL_MAPPING = {
          "NA": "https://advertising-api.amazon.com/",
          "EU": "https://advertising-api-eu.amazon.com/",
          "FE": "https://advertising-api-fe.amazon.com/"
      } -%} {{ URL_MAPPING[config["region"]] }}
    authenticator:
      type: OAuthAuthenticator
      client_id: "{{ config[\"client_id\"] }}"
      grant_type: refresh_token
      client_secret: "{{ config[\"client_secret\"] }}"
      refresh_token: "{{ config[\"refresh_token\"] }}"
      refresh_request_body: {}
      token_refresh_endpoint: https://api.amazon.com/auth/o2/token

streams:
  - $ref: "#/definitions/streams/profiles"
  - $ref: "#/definitions/streams/portfolios"
  - $ref: "#/definitions/streams/sponsored_display_campaigns"
  - $ref: "#/definitions/streams/sponsored_display_ad_groups"
  - $ref: "#/definitions/streams/sponsored_display_product_ads"
  - $ref: "#/definitions/streams/sponsored_display_targetings"
  - $ref: "#/definitions/streams/sponsored_display_creatives"
  - $ref: "#/definitions/streams/sponsored_display_budget_rules"
  - $ref: "#/definitions/streams/sponsored_brands_keywords"
  - $ref: "#/definitions/streams/sponsored_brands_campaigns"
  - $ref: "#/definitions/streams/sponsored_brands_ad_groups"
  - $ref: "#/definitions/streams/sponsored_product_campaigns"
  - $ref: "#/definitions/streams/sponsored_product_ad_groups"
  - $ref: "#/definitions/streams/sponsored_product_keywords"
  - $ref: "#/definitions/streams/sponsored_product_negative_keywords"
  - $ref: "#/definitions/streams/sponsored_product_campaign_negative_keywords"
  - $ref: "#/definitions/streams/sponsored_product_ads"
  - $ref: "#/definitions/streams/sponsored_product_targetings"
  - $ref: "#/definitions/streams/sponsored_product_ad_group_bid_recommendations"
  - $ref: "#/definitions/streams/sponsored_product_ad_group_suggested_keywords"
  - $ref: "#/definitions/streams/attribution_report_products"
  - $ref: "#/definitions/streams/attribution_report_performance_adgroup"
  - $ref: "#/definitions/streams/attribution_report_performance_campaign"
  - $ref: "#/definitions/streams/attribution_report_performance_creative"
  - $ref: "#/definitions/streams/sponsored_brands_v3_report_stream"
  - $ref: "#/definitions/streams/sponsored_display_campaigns_report_stream"
  - $ref: "#/definitions/streams/sponsored_display_adgroups_report_stream"
  - $ref: "#/definitions/streams/sponsored_display_productads_report_stream"
  - $ref: "#/definitions/streams/sponsored_display_targets_report_stream"
  - $ref: "#/definitions/streams/sponsored_display_asins_report_stream"
  - $ref: "#/definitions/streams/sponsored_products_campaigns_report_stream"
  - $ref: "#/definitions/streams/sponsored_products_adgroups_report_stream"
  - $ref: "#/definitions/streams/sponsored_products_keywords_report_stream"
  - $ref: "#/definitions/streams/sponsored_products_targets_report_stream"
  - $ref: "#/definitions/streams/sponsored_products_productads_report_stream"
  - $ref: "#/definitions/streams/sponsored_products_asins_keywords_report_stream"
  - $ref: "#/definitions/streams/sponsored_products_asins_targets_report_stream"

spec:
  type: Spec
  connection_specification:
    type: object
    $schema: http://json-schema.org/draft-07/schema#
    required:
      - client_id
      - client_secret
      - refresh_token
    properties:
      auth_type:
        type: string
        const: oauth2.0
        order: 0
        title: Auth Type
        default: oauth2.0
      client_id:
        type: string
        description: >-
          The client ID of your Amazon Ads developer application. See the <a
          href="https://advertising.amazon.com/API/docs/en-us/get-started/generate-api-tokens#retrieve-your-client-id-and-client-secret">docs</a>
          for more information.
        order: 1
        title: Client ID
        airbyte_secret: true
      client_secret:
        type: string
        description: >-
          The client secret of your Amazon Ads developer application. See the <a
          href="https://advertising.amazon.com/API/docs/en-us/get-started/generate-api-tokens#retrieve-your-client-id-and-client-secret">docs</a>
          for more information.
        order: 2
        title: Client Secret
        airbyte_secret: true
      refresh_token:
        type: string
        description: >-
          Amazon Ads refresh token. See the <a
          href="https://advertising.amazon.com/API/docs/en-us/get-started/generate-api-tokens">docs</a>
          for more information on how to obtain this token.
        order: 3
        title: Refresh Token
        airbyte_secret: true
      region:
        type: string
        description: >-
          Region to pull data from (EU/NA/FE). See <a
          href="https://advertising.amazon.com/API/docs/en-us/info/api-overview#api-endpoints">docs</a>
          for more details.
        enum:
          - NA
          - EU
          - FE
        order: 4
        title: Region
        default: NA
      start_date:
        type: string
        description: >-
          The Start date for collecting reports, should not be more than 60 days
          in the past. In YYYY-MM-DD format
        order: 5
        title: Start Date
        format: date
        pattern: ^[0-9]{4}-[0-9]{2}-[0-9]{2}$
        examples:
          - "2022-10-10"
          - "2022-10-22"
      profiles:
        type: array
        description: >-
          Profile IDs you want to fetch data for. The Amazon Ads source
          connector supports only profiles with seller and vendor type, profiles
          with agency type will be ignored. See <a
          href="https://advertising.amazon.com/API/docs/en-us/concepts/authorization/profiles">docs</a>
          for more details. Note: If Marketplace IDs are also selected, profiles
          will be selected if they match the Profile ID OR the Marketplace ID.
        items:
          type: integer
        order: 6
        title: Profile IDs
      marketplace_ids:
        type: array
        description: >-
          Marketplace IDs you want to fetch data for. Note: If Profile IDs are
          also selected, profiles will be selected if they match the Profile ID
          OR the Marketplace ID.
        items:
          type: string
        order: 7
        title: Marketplace IDs
      state_filter:
        type: array
        description: >-
          Reflects the state of the Display, Product, and Brand Campaign streams
          as enabled, paused, or archived. If you do not populate this field, it
          will be ignored completely.
        items:
          type: string
          description: An enumeration.
          enum:
            - enabled
            - paused
            - archived
          title: StateFilterEnum
        order: 8
        title: State Filter
        default: []
        uniqueItems: true
      look_back_window:
        type: integer
        description: >-
          The amount of days to go back in time to get the updated data from
          Amazon Ads
        order: 9
        title: Look Back Window
        default: 3
        examples:
          - 3
          - 10
      report_record_types:
        type: array
        description: >-
          Optional configuration which accepts an array of string of record
          types. Leave blank for default behaviour to pull all report types. Use
          this config option only if you want to pull specific report type(s).
          See <a
          href="https://advertising.amazon.com/API/docs/en-us/reporting/v2/report-types">docs</a>
          for more details
        items:
          type: string
          description: An enumeration.
          enum:
            - adGroups
            - asins
            - asins_keywords
            - asins_targets
            - campaigns
            - keywords
            - productAds
            - targets
          title: ReportRecordTypeEnum
        order: 10
        title: Report Record Types
        default: []
        uniqueItems: true
    additionalProperties: true

metadata:
  autoImportSchema:
    profiles: false
    profiles_filtered: false
    portfolios: false
    sponsored_display_campaigns: false
    sponsored_display_ad_groups: false
    sponsored_display_product_ads: false
    sponsored_display_targetings: false
    sponsored_display_creatives: false
    sponsored_display_budget_rules: false
    sponsored_brands_keywords: false
    sponsored_brands_campaigns: false
    sponsored_brands_ad_groups: false
    sponsored_product_campaigns: false
    sponsored_product_ad_groups: false
    sponsored_product_keywords: false
    sponsored_product_negative_keywords: false
    sponsored_product_campaign_negative_keywords: false
    sponsored_product_ads: false
    sponsored_product_targetings: false
    sponsored_product_ad_group_bid_recommendations: false
    sponsored_product_ad_group_suggested_keywords: false
    attribution_report_products: false
    attribution_report_performance_adgroup: false
    attribution_report_performance_campaign: false
    attribution_report_performance_creative: false
    sponsored_brands_v3_report_stream: false
    sponsored_display_campaigns_report_stream: false
    sponsored_display_adgroups_report_stream: false
    sponsored_display_productads_report_stream: false
    sponsored_display_targets_report_stream: false
    sponsored_display_asins_report_stream: false
    sponsored_products_campaigns_report_stream: false
    sponsored_products_adgroups_report_stream: false
    sponsored_products_keywords_report_stream: false
    sponsored_products_targets_report_stream: false
    sponsored_products_productads_report_stream: false
    sponsored_products_asins_keywords_report_stream: false
    sponsored_products_asins_targets_report_stream: false
  testedStreams:
    profiles:
      streamHash: 5bcf60ed019768f598ab1b41ab9ec59c46b6a564
    profiles_filtered:
      streamHash: f36edccafcdcb6e617a94734070207ded09b1412
    portfolios:
      streamHash: 6929d5fdf3aaea1ffc2054c34c5fd5efa7151d15
    sponsored_display_campaigns:
      streamHash: 9525fc98e6021d19046251341303f0f27026c5cf
    sponsored_display_ad_groups:
      streamHash: ba3332cae7715610b7ee632d3949d7aef510ac53
    sponsored_display_product_ads:
      streamHash: 0b3dd6db5bbe5574dcb174e7fa0682c885cda09e
    sponsored_display_targetings:
      streamHash: 54f769ad102f3fbfa6055342ae2f4c8747840f05
    sponsored_display_creatives:
      streamHash: 1b0334337f98d9f263d33aaf1b71f41badfef4a7
    sponsored_display_budget_rules:
      streamHash: 3ac844fc13eaa9d90a67b39975d2431d437735ce
    sponsored_brands_keywords:
      streamHash: 14b4ed1b1ad1a451bae8d1c43b02a8859e0c42c8
    sponsored_brands_campaigns:
      streamHash: 04f7e67567e39a19f465d2b76521d96ccf348ef9
    sponsored_brands_ad_groups:
      streamHash: a72c4119757e11e610cb20e7619ff563172ef6ef
    sponsored_product_campaigns:
      streamHash: bc0dea24e4e04881fe74b237b66987f784ed6d0d
    sponsored_product_ad_groups:
      streamHash: 28c5679bdabd8b820d7404ed9700da62739f7f80
    sponsored_product_keywords:
      streamHash: 15d7b7f0898467b9db18dc9f61a4bae8a48c9cca
    sponsored_product_negative_keywords:
      streamHash: b25e0db45f9216c0415a569b7b6a9bbb7ddb1535
    sponsored_product_campaign_negative_keywords:
      streamHash: 16393a47bb430b012e54a253957759d402ee9e3b
    sponsored_product_ads:
      streamHash: 51b955f8b0ab3b0183abc0ca37eed6804bc7cf0b
    sponsored_product_targetings:
      streamHash: e214c1af94bd8cf48f4ae29d5fec250cc93fac0a
    sponsored_product_ad_group_bid_recommendations:
      streamHash: 89688f14e1c90e0bb43474c68b9b4599e300e907
    sponsored_product_ad_group_suggested_keywords:
      streamHash: 29cac8c857d756b15df482267fc5b199fb48c028
    attribution_report_products:
      streamHash: edbc077da83e143715e1afea1231c6383010f50d
    attribution_report_performance_adgroup:
      streamHash: 8b75eac859f1ea75c58c8d9c09163cec6150eb4f
    attribution_report_performance_campaign:
      streamHash: f21a5aa58ffaec25215e72ceedeb8edb17009b26
    attribution_report_performance_creative:
      streamHash: 580c55a93c8d3fa44f0416df25f4338453dc0dcc
    sponsored_brands_v3_report_stream:
      streamHash: a806e0abc725b846ef7c162f67e2b7af6f887e19
    sponsored_display_campaigns_report_stream:
      streamHash: bda2dc46fd462735985103991b0e673959e26728
    sponsored_display_adgroups_report_stream:
      streamHash: 596bbbe4ad3f1fa4e460bf3bd280b1304737f8f3
    sponsored_display_productads_report_stream:
      streamHash: d2f39d0dde49210c69b1c44bdc0a5043bfed9afc
    sponsored_display_targets_report_stream:
      streamHash: 3f17c86a0bb91b806501c27810bd3a302b10cede
    sponsored_display_asins_report_stream:
      streamHash: ed8488a654e301e872c5c7af14457202a0d48a51
    sponsored_products_campaigns_report_stream:
      streamHash: 3013aa89c6b0e67c4cc2694fd5a8e93273a89f8a
    sponsored_products_adgroups_report_stream:
      streamHash: 68fda129f91a98ceafd59488e613b2b63ac2c9ea
    sponsored_products_keywords_report_stream:
      streamHash: 02ffd1fa0714f0449e55b84f569293c9fbb7ec85
    sponsored_products_targets_report_stream:
      streamHash: ecd756d03abdaab694c85db9a3b55a477e8ea679
    sponsored_products_productads_report_stream:
      streamHash: 74a77264343ab57efb2558a4683d1d665d791525
    sponsored_products_asins_keywords_report_stream:
      streamHash: b0d301d774876f7cc0190976ff539d35491f2930
    sponsored_products_asins_targets_report_stream:
      streamHash: b43f5c301245d7afeb49032b8c1e3b80fae742b6
  assist: {}

schemas:
  profiles:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      countryCode:
        type:
          - "null"
          - string
      currencyCode:
        type:
          - "null"
          - string
      dailyBudget:
        type:
          - "null"
          - number
      timezone:
        type:
          - "null"
          - string
      accountInfo:
        type:
          - object
          - "null"
        properties:
          type:
            type:
              - "null"
              - string
          marketplaceStringId:
            type:
              - "null"
              - string
          id:
            type:
              - "null"
              - string
          name:
            type:
              - "null"
              - string
          subType:
            type:
              - "null"
              - string
          validPaymentMethod:
            type:
              - "null"
              - boolean
    title: profiles
    additionalProperties: true
  profiles_filtered:
    type: object
    $schema: http://json-schema.org/draft-07/schema#
    additionalProperties: true
    properties: {}
  portfolios:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      portfolioId:
        type:
          - "null"
          - integer
      name:
        type:
          - "null"
          - string
      budget:
        type:
          - object
          - "null"
        properties:
          amount:
            type:
              - "null"
              - number
          currencyCode:
            type:
              - "null"
              - string
          policy:
            type:
              - "null"
              - string
          startDate:
            type:
              - "null"
              - string
          endDate:
            type:
              - "null"
              - string
      inBudget:
        type:
          - "null"
          - boolean
      state:
        type:
          - "null"
          - string
      creationDate:
        type:
          - "null"
          - integer
      lastUpdatedDate:
        type:
          - "null"
          - integer
      servingStatus:
        type:
          - "null"
          - string
    title: portfolios
    additionalProperties: true
  sponsored_display_campaigns:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      campaignId:
        type:
          - "null"
          - number
      name:
        type:
          - "null"
          - string
      budgetType:
        type:
          - "null"
          - string
      budget:
        type:
          - "null"
          - number
      startDate:
        type:
          - "null"
          - string
      endDate:
        type:
          - "null"
          - string
      costType:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      portfolioId:
        type:
          - "null"
          - integer
      tactic:
        type:
          - "null"
          - string
      deliveryProfile:
        type:
          - "null"
          - string
    title: sponsored_display_campaigns
    additionalProperties: true
  sponsored_display_ad_groups:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      name:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - number
      adGroupId:
        type:
          - "null"
          - number
      defaultBid:
        type:
          - "null"
          - number
      bidOptimization:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      tactic:
        type:
          - "null"
          - string
      creativeType:
        type:
          - "null"
          - string
    title: sponsored_display_ad_groups
    additionalProperties: true
  sponsored_display_product_ads:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      state:
        type:
          - "null"
          - string
      adId:
        type:
          - "null"
          - number
      campaignId:
        type:
          - "null"
          - number
      adGroupId:
        type:
          - "null"
          - number
      asin:
        type:
          - "null"
          - string
      sku:
        type:
          - "null"
          - string
    title: sponsored_display_product_ads
    additionalProperties: true
  sponsored_display_targetings:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      targetId:
        type:
          - "null"
          - number
      adGroupId:
        type:
          - "null"
          - number
      state:
        type:
          - "null"
          - string
      expressionType:
        type:
          - "null"
          - string
      bid:
        type:
          - "null"
          - number
      campaignId:
        type:
          - "null"
          - number
      expression:
        type: array
        items:
          type:
            - "null"
            - object
          additionalProperties: true
      resolvedExpression:
        type: array
        items:
          type:
            - "null"
            - object
          additionalProperties: true
    title: sponsored_display_targetings
    additionalProperties: true
  sponsored_display_creatives:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      adGroupId:
        type:
          - "null"
          - number
      creativeId:
        type:
          - "null"
          - number
      creativeType:
        type:
          - "null"
          - string
      properties:
        type:
          - "null"
          - object
      moderationStatus:
        type:
          - "null"
          - string
    title: sponsored_display_creatives
    additionalProperties: true
  sponsored_display_budget_rules:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      ruleId:
        type:
          - "null"
          - string
      ruleStatus:
        type:
          - "null"
          - string
      ruleState:
        type:
          - "null"
          - string
      lastUpdatedDate:
        type:
          - "null"
          - number
      createdDate:
        type:
          - "null"
          - number
      ruleDetails:
        type:
          - object
          - "null"
        properties:
          name:
            type:
              - "null"
              - string
          ruleType:
            type:
              - "null"
              - string
          duration:
            type:
              - object
              - "null"
            properties:
              eventTypeRuleDuration:
                type:
                  - object
                  - "null"
                properties:
                  eventId:
                    type:
                      - "null"
                      - string
                  endDate:
                    type:
                      - "null"
                      - string
                  eventName:
                    type:
                      - "null"
                      - string
                  startDate:
                    type:
                      - "null"
                      - string
              dateRangeTypeRuleDuration:
                type:
                  - object
                  - "null"
                properties:
                  endDate:
                    type:
                      - "null"
                      - string
                  startDate:
                    type:
                      - "null"
                      - string
          budgetIncreaseBy:
            type:
              - object
              - "null"
            properties:
              type:
                type:
                  - "null"
                  - string
              value:
                type:
                  - "null"
                  - number
          recurrence:
            type:
              - object
              - "null"
            properties:
              type:
                type:
                  - "null"
                  - string
              daysOfWeek:
                type:
                  - "null"
                  - array
                items:
                  type:
                    - "null"
                    - string
              intraDaySchedule:
                type:
                  - "null"
                  - array
                items:
                  type:
                    - object
                    - "null"
                  properties:
                    startTime:
                      type:
                        - "null"
                        - string
                    endTime:
                      type:
                        - "null"
                        - string
              threshold:
                type:
                  - "null"
                  - number
          performanceMeasureCondition:
            type:
              - object
              - "null"
            properties:
              metricName:
                type:
                  - "null"
                  - string
              comparisonOperator:
                type:
                  - "null"
                  - string
              threshold:
                type:
                  - "null"
                  - number
      ruleStatusDetails:
        type:
          - "null"
          - object
        additionalProperties: true
    title: sponsored_display_budget_rules
    additionalProperties: true
  sponsored_brands_keywords:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      campaignId:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      name:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_brands_keywords
    additionalProperties: true
  sponsored_brands_campaigns:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      campaignId:
        type:
          - "null"
          - string
      name:
        type:
          - "null"
          - string
      tags:
        type:
          - "null"
          - object
        additionalProperties: true
      budget:
        type:
          - "null"
          - number
      budgetType:
        type:
          - "null"
          - string
      startDate:
        type:
          - "null"
          - string
      endDate:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      brandEntityId:
        type:
          - "null"
          - string
      portfolioId:
        type:
          - "null"
          - string
      ruleBasedBudget:
        type:
          - "null"
          - object
      bidding:
        type:
          - "null"
          - object
      productLocation:
        type:
          - "null"
          - string
      costType:
        type:
          - "null"
          - string
      smartDefault:
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_brands_campaigns
    additionalProperties: true
  sponsored_brands_ad_groups:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      campaignId:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      name:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_brands_ad_groups
    additionalProperties: true
  sponsored_product_campaigns:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      portfolioId:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      name:
        type:
          - "null"
          - string
      tags:
        type:
          - "null"
          - object
        additionalProperties: true
      targetingType:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      dynamicBidding:
        type:
          - "null"
          - object
      startDate:
        type:
          - "null"
          - string
      endDate:
        type:
          - "null"
          - string
      budget:
        type:
          - "null"
          - object
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_product_campaigns
    additionalProperties: true
  sponsored_product_ad_groups:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      adGroupId:
        type:
          - "null"
          - string
      name:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      defaultBid:
        type:
          - "null"
          - number
      state:
        type:
          - "null"
          - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_product_ad_groups
    additionalProperties: true
  sponsored_product_keywords:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      keywordId:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      keywordText:
        type:
          - "null"
          - string
      nativeLanguageLocale:
        type:
          - "null"
          - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_product_keywords
    additionalProperties: true
  sponsored_product_negative_keywords:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      keywordId:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      keywordText:
        type:
          - "null"
          - string
      nativeLanguageLocale:
        type:
          - "null"
          - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_product_negative_keywords
    additionalProperties: true
  sponsored_product_campaign_negative_keywords:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      keywordId:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - number
      state:
        type:
          - "null"
          - string
      keywordText:
        type:
          - "null"
          - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_product_campaign_negative_keywords
    additionalProperties: true
  sponsored_product_ads:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      adId:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      customText:
        type:
          - "null"
          - string
      asin:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      sku:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_product_ads
    additionalProperties: true
  sponsored_product_targetings:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      expression:
        type:
          - "null"
          - array
        items:
          type:
            - "null"
            - object
          additionalProperties: true
      targetId:
        type:
          - "null"
          - string
      resolvedExpression:
        type: array
        items:
          type:
            - "null"
            - object
          additionalProperties: true
      campaignId:
        type:
          - "null"
          - string
      expressionType:
        type:
          - "null"
          - string
      state:
        type:
          - "null"
          - string
      bid:
        type:
          - "null"
          - number
      adGroupId:
        type:
          - "null"
          - string
      extendedData:
        type:
          - "null"
          - object
    title: sponsored_product_targetings
    additionalProperties: true
  sponsored_product_ad_group_bid_recommendations:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      adGroupId:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      theme:
        type:
          - "null"
          - string
      bidRecommendationsForTargetingExpressions:
        type: array
        items:
          type:
            - object
            - "null"
          properties:
            bidValues:
              type: array
              items:
                type:
                  - "null"
                  - object
                additionalProperties: true
            targetingExpression:
              type:
                - "null"
                - object
              additionalProperties: true
    title: sponsored_product_ad_group_bid_recommendations
    additionalProperties: true
  sponsored_product_ad_group_suggested_keywords:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      adGroupId:
        type:
          - "null"
          - integer
      suggestedKeywords:
        type:
          - "null"
          - array
        items:
          type:
            - object
            - "null"
          properties:
            keywordText:
              type:
                - "null"
                - string
            matchType:
              type:
                - "null"
                - string
    title: sponsored_product_ad_group_suggested_keywords
    additionalProperties: true
  attribution_report_products:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      date:
        type:
          - "null"
          - string
      brandName:
        type:
          - "null"
          - string
      marketplace:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      productAsin:
        type:
          - "null"
          - string
      productConversionType:
        type:
          - "null"
          - string
      advertiserName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      creativeId:
        type:
          - "null"
          - string
      productName:
        type:
          - "null"
          - string
      productCategory:
        type:
          - "null"
          - string
      productSubcategory:
        type:
          - "null"
          - string
      productGroup:
        type:
          - "null"
          - string
      publisher:
        type:
          - "null"
          - string
      Click-throughs:
        type:
          - "null"
          - string
      attributedDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      attributedAddToCartClicks14d:
        type:
          - "null"
          - string
      attributedPurchases14d:
        type:
          - "null"
          - string
      unitsSold14d:
        type:
          - "null"
          - string
      attributedSales14d:
        type:
          - "null"
          - string
      attributedTotalDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      attributedTotalAddToCartClicks14d:
        type:
          - "null"
          - string
      attributedTotalPurchases14d:
        type:
          - "null"
          - string
      totalUnitsSold14d:
        type:
          - "null"
          - string
      totalAttributedSales14d:
        type:
          - "null"
          - string
      brb_bonus_amount:
        type:
          - "null"
          - string
      brandHaloDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      brandHaloAttributedAddToCartClicks14d:
        type:
          - "null"
          - string
      brandHaloAttributedPurchases14d:
        type:
          - "null"
          - string
      brandHaloUnitsSold14d:
        type:
          - "null"
          - string
      brandHaloAttributedSales14d:
        type:
          - "null"
          - string
      attributedNewToBrandPurchases14d:
        type:
          - "null"
          - string
      attributedNewToBrandUnitsSold14d:
        type:
          - "null"
          - string
      attributedNewToBrandSales14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandPurchases14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandUnitsSold14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandSales14d:
        type:
          - "null"
          - string
    title: attribution_report_products
    additionalProperties: true
  attribution_report_performance_adgroup:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      date:
        type:
          - "null"
          - string
      brandName:
        type:
          - "null"
          - string
      marketplace:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      productAsin:
        type:
          - "null"
          - string
      productConversionType:
        type:
          - "null"
          - string
      advertiserName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      creativeId:
        type:
          - "null"
          - string
      productName:
        type:
          - "null"
          - string
      productCategory:
        type:
          - "null"
          - string
      productSubcategory:
        type:
          - "null"
          - string
      productGroup:
        type:
          - "null"
          - string
      publisher:
        type:
          - "null"
          - string
      Click-throughs:
        type:
          - "null"
          - string
      attributedDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      attributedAddToCartClicks14d:
        type:
          - "null"
          - string
      attributedPurchases14d:
        type:
          - "null"
          - string
      unitsSold14d:
        type:
          - "null"
          - string
      attributedSales14d:
        type:
          - "null"
          - string
      attributedTotalDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      attributedTotalAddToCartClicks14d:
        type:
          - "null"
          - string
      attributedTotalPurchases14d:
        type:
          - "null"
          - string
      totalUnitsSold14d:
        type:
          - "null"
          - string
      totalAttributedSales14d:
        type:
          - "null"
          - string
      brb_bonus_amount:
        type:
          - "null"
          - string
      brandHaloDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      brandHaloAttributedAddToCartClicks14d:
        type:
          - "null"
          - string
      brandHaloAttributedPurchases14d:
        type:
          - "null"
          - string
      brandHaloUnitsSold14d:
        type:
          - "null"
          - string
      brandHaloAttributedSales14d:
        type:
          - "null"
          - string
      attributedNewToBrandPurchases14d:
        type:
          - "null"
          - string
      attributedNewToBrandUnitsSold14d:
        type:
          - "null"
          - string
      attributedNewToBrandSales14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandPurchases14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandUnitsSold14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandSales14d:
        type:
          - "null"
          - string
    title: attribution_report_performance_adgroup
    additionalProperties: true
  attribution_report_performance_campaign:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      date:
        type:
          - "null"
          - string
      brandName:
        type:
          - "null"
          - string
      marketplace:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      productAsin:
        type:
          - "null"
          - string
      productConversionType:
        type:
          - "null"
          - string
      advertiserName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      creativeId:
        type:
          - "null"
          - string
      productName:
        type:
          - "null"
          - string
      productCategory:
        type:
          - "null"
          - string
      productSubcategory:
        type:
          - "null"
          - string
      productGroup:
        type:
          - "null"
          - string
      publisher:
        type:
          - "null"
          - string
      Click-throughs:
        type:
          - "null"
          - string
      attributedDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      attributedAddToCartClicks14d:
        type:
          - "null"
          - string
      attributedPurchases14d:
        type:
          - "null"
          - string
      unitsSold14d:
        type:
          - "null"
          - string
      attributedSales14d:
        type:
          - "null"
          - string
      attributedTotalDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      attributedTotalAddToCartClicks14d:
        type:
          - "null"
          - string
      attributedTotalPurchases14d:
        type:
          - "null"
          - string
      totalUnitsSold14d:
        type:
          - "null"
          - string
      totalAttributedSales14d:
        type:
          - "null"
          - string
      brb_bonus_amount:
        type:
          - "null"
          - string
      brandHaloDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      brandHaloAttributedAddToCartClicks14d:
        type:
          - "null"
          - string
      brandHaloAttributedPurchases14d:
        type:
          - "null"
          - string
      brandHaloUnitsSold14d:
        type:
          - "null"
          - string
      brandHaloAttributedSales14d:
        type:
          - "null"
          - string
      attributedNewToBrandPurchases14d:
        type:
          - "null"
          - string
      attributedNewToBrandUnitsSold14d:
        type:
          - "null"
          - string
      attributedNewToBrandSales14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandPurchases14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandUnitsSold14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandSales14d:
        type:
          - "null"
          - string
    title: attribution_report_performance_campaign
    additionalProperties: true
  attribution_report_performance_creative:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      date:
        type:
          - "null"
          - string
      brandName:
        type:
          - "null"
          - string
      marketplace:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - string
      productAsin:
        type:
          - "null"
          - string
      productConversionType:
        type:
          - "null"
          - string
      advertiserName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - string
      creativeId:
        type:
          - "null"
          - string
      productName:
        type:
          - "null"
          - string
      productCategory:
        type:
          - "null"
          - string
      productSubcategory:
        type:
          - "null"
          - string
      productGroup:
        type:
          - "null"
          - string
      publisher:
        type:
          - "null"
          - string
      Click-throughs:
        type:
          - "null"
          - string
      attributedDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      attributedAddToCartClicks14d:
        type:
          - "null"
          - string
      attributedPurchases14d:
        type:
          - "null"
          - string
      unitsSold14d:
        type:
          - "null"
          - string
      attributedSales14d:
        type:
          - "null"
          - string
      attributedTotalDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      attributedTotalAddToCartClicks14d:
        type:
          - "null"
          - string
      attributedTotalPurchases14d:
        type:
          - "null"
          - string
      totalUnitsSold14d:
        type:
          - "null"
          - string
      totalAttributedSales14d:
        type:
          - "null"
          - string
      brb_bonus_amount:
        type:
          - "null"
          - string
      brandHaloDetailPageViewsClicks14d:
        type:
          - "null"
          - string
      brandHaloAttributedAddToCartClicks14d:
        type:
          - "null"
          - string
      brandHaloAttributedPurchases14d:
        type:
          - "null"
          - string
      brandHaloUnitsSold14d:
        type:
          - "null"
          - string
      brandHaloAttributedSales14d:
        type:
          - "null"
          - string
      attributedNewToBrandPurchases14d:
        type:
          - "null"
          - string
      attributedNewToBrandUnitsSold14d:
        type:
          - "null"
          - string
      attributedNewToBrandSales14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandPurchases14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandUnitsSold14d:
        type:
          - "null"
          - string
      brandHaloNewToBrandSales14d:
        type:
          - "null"
          - string
    title: attribution_report_performance_creative
    additionalProperties: true
  sponsored_brands_v3_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      attributionType:
        type:
          - "null"
          - string
      campaignName:
        type:
          - "null"
          - string
      newToBrandSales14d:
        type:
          - "null"
          - number
      orders14d:
        type:
          - "null"
          - integer
      productName:
        type:
          - "null"
          - string
      sales14d:
        type:
          - "null"
          - number
      newToBrandPurchasesPercentage14d:
        type:
          - "null"
          - number
      purchasedAsin:
        type:
          - "null"
          - string
      newToBrandSalesPercentage14d:
        type:
          - "null"
          - number
      productCategory:
        type:
          - "null"
          - string
      newToBrandPurchases14d:
        type:
          - "null"
          - integer
      newToBrandUnitsSoldPercentage14d:
        type:
          - "null"
          - number
      unitsSold14d:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      newToBrandUnitsSold14d:
        type:
          - "null"
          - integer
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
    title: sponsored_brands_v3_report_stream
    additionalProperties: true
  sponsored_display_campaigns_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      addToCart:
        type:
          - "null"
          - integer
      addToCartClicks:
        type:
          - "null"
          - integer
      addToCartRate:
        type:
          - "null"
          - number
      addToCartViews:
        type:
          - "null"
          - integer
      addToList:
        type:
          - "null"
          - integer
      addToListFromClicks:
        type:
          - "null"
          - integer
      addToListFromViews:
        type:
          - "null"
          - integer
      qualifiedBorrows:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrows:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      brandedSearches:
        type:
          - "null"
          - integer
      brandedSearchesClicks:
        type:
          - "null"
          - integer
      brandedSearchesViews:
        type:
          - "null"
          - integer
      brandedSearchRate:
        type:
          - "null"
          - number
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
      campaignName:
        type:
          - "null"
          - string
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      detailPageViews:
        type:
          - "null"
          - integer
      detailPageViewsClicks:
        type:
          - "null"
          - integer
      eCPAddToCart:
        type:
          - "null"
          - number
      eCPBrandSearch:
        type:
          - "null"
          - number
      endDate:
        type:
          - "null"
          - string
      impressions:
        type:
          - "null"
          - integer
      impressionsViews:
        type:
          - "null"
          - integer
      leadFormOpens:
        type:
          - "null"
          - integer
      leads:
        type:
          - "null"
          - integer
      linkOuts:
        type:
          - "null"
          - integer
      newToBrandPurchases:
        type:
          - "null"
          - integer
      newToBrandPurchasesClicks:
        type:
          - "null"
          - integer
      newToBrandSalesClicks:
        type:
          - "null"
          - number
      newToBrandUnitsSold:
        type:
          - "null"
          - integer
      newToBrandUnitsSoldClicks:
        type:
          - "null"
          - integer
      purchases:
        type:
          - "null"
          - integer
      purchasesClicks:
        type:
          - "null"
          - integer
      purchasesPromotedClicks:
        type:
          - "null"
          - integer
      sales:
        type:
          - "null"
          - number
      salesClicks:
        type:
          - "null"
          - number
      salesPromotedClicks:
        type:
          - "null"
          - number
      startDate:
        type:
          - "null"
          - string
      unitsSold:
        type:
          - "null"
          - integer
      unitsSoldClicks:
        type:
          - "null"
          - integer
      videoCompleteViews:
        type:
          - "null"
          - integer
      videoFirstQuartileViews:
        type:
          - "null"
          - integer
      videoMidpointViews:
        type:
          - "null"
          - integer
      videoThirdQuartileViews:
        type:
          - "null"
          - integer
      videoUnmutes:
        type:
          - "null"
          - integer
      viewabilityRate:
        type:
          - "null"
          - number
      viewClickThroughRate:
        type:
          - "null"
          - number
      campaignBudgetAmount:
        type:
          - "null"
          - number
      campaignStatus:
        type:
          - "null"
          - string
      costType:
        type:
          - "null"
          - string
      cumulativeReach:
        type:
          - "null"
          - string
      impressionsFrequencyAverage:
        type:
          - "null"
          - number
      newToBrandDetailPageViewClicks:
        type:
          - "null"
          - integer
      newToBrandDetailPageViewRate:
        type:
          - "null"
          - number
      newToBrandDetailPageViews:
        type:
          - "null"
          - integer
      newToBrandDetailPageViewViews:
        type:
          - "null"
          - integer
      newToBrandECPDetailPageView:
        type:
          - "null"
          - number
      newToBrandSales:
        type:
          - "null"
          - number
    title: sponsored_display_campaigns_report_stream
    additionalProperties: true
  sponsored_display_adgroups_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - integer
      addToCart:
        type:
          - "null"
          - integer
      addToCartClicks:
        type:
          - "null"
          - integer
      addToCartRate:
        type:
          - "null"
          - number
      addToCartViews:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      addToList:
        type:
          - "null"
          - integer
      addToListFromClicks:
        type:
          - "null"
          - integer
      addToListFromViews:
        type:
          - "null"
          - integer
      qualifiedBorrows:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrows:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      bidOptimization:
        type:
          - "null"
          - string
      brandedSearches:
        type:
          - "null"
          - integer
      brandedSearchesClicks:
        type:
          - "null"
          - integer
      brandedSearchesViews:
        type:
          - "null"
          - integer
      brandedSearchRate:
        type:
          - "null"
          - number
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      detailPageViews:
        type:
          - "null"
          - integer
      detailPageViewsClicks:
        type:
          - "null"
          - integer
      eCPAddToCart:
        type:
          - "null"
          - number
      eCPBrandSearch:
        type:
          - "null"
          - number
      endDate:
        type:
          - "null"
          - string
      impressions:
        type:
          - "null"
          - integer
      impressionsViews:
        type:
          - "null"
          - integer
      leadFormOpens:
        type:
          - "null"
          - integer
      leads:
        type:
          - "null"
          - integer
      linkOuts:
        type:
          - "null"
          - integer
      newToBrandPurchases:
        type:
          - "null"
          - integer
      newToBrandPurchasesClicks:
        type:
          - "null"
          - integer
      newToBrandSales:
        type:
          - "null"
          - number
      newToBrandSalesClicks:
        type:
          - "null"
          - number
      newToBrandUnitsSold:
        type:
          - "null"
          - integer
      newToBrandUnitsSoldClicks:
        type:
          - "null"
          - integer
      purchases:
        type:
          - "null"
          - integer
      purchasesClicks:
        type:
          - "null"
          - integer
      purchasesPromotedClicks:
        type:
          - "null"
          - integer
      sales:
        type:
          - "null"
          - number
      salesClicks:
        type:
          - "null"
          - number
      salesPromotedClicks:
        type:
          - "null"
          - number
      startDate:
        type:
          - "null"
          - string
      unitsSold:
        type:
          - "null"
          - integer
      unitsSoldClicks:
        type:
          - "null"
          - integer
      videoCompleteViews:
        type:
          - "null"
          - integer
      videoFirstQuartileViews:
        type:
          - "null"
          - integer
      videoMidpointViews:
        type:
          - "null"
          - integer
      videoThirdQuartileViews:
        type:
          - "null"
          - integer
      videoUnmutes:
        type:
          - "null"
          - integer
      viewabilityRate:
        type:
          - "null"
          - number
      viewClickThroughRate:
        type:
          - "null"
          - number
      cumulativeReach:
        type:
          - "null"
          - string
      impressionsFrequencyAverage:
        type:
          - "null"
          - number
      newToBrandDetailPageViewClicks:
        type:
          - "null"
          - integer
      newToBrandDetailPageViewRate:
        type:
          - "null"
          - number
      newToBrandDetailPageViews:
        type:
          - "null"
          - integer
      newToBrandDetailPageViewViews:
        type:
          - "null"
          - integer
      newToBrandECPDetailPageView:
        type:
          - "null"
          - number
    title: sponsored_display_adgroups_report_stream
    additionalProperties: true
  sponsored_display_productads_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      adId:
        type:
          - "null"
          - integer
      addToCart:
        type:
          - "null"
          - integer
      addToCartRate:
        type:
          - "null"
          - number
      addToCartViews:
        type:
          - "null"
          - integer
      addToCartClicks:
        type:
          - "null"
          - integer
      adGroupId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      addToList:
        type:
          - "null"
          - integer
      addToListFromClicks:
        type:
          - "null"
          - integer
      qualifiedBorrows:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrows:
        type:
          - "null"
          - integer
      addToListFromViews:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      bidOptimization:
        type:
          - "null"
          - string
      brandedSearches:
        type:
          - "null"
          - integer
      brandedSearchesClicks:
        type:
          - "null"
          - integer
      brandedSearchesViews:
        type:
          - "null"
          - integer
      brandedSearchRate:
        type:
          - "null"
          - number
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      cumulativeReach:
        type:
          - "null"
          - string
      detailPageViews:
        type:
          - "null"
          - integer
      detailPageViewsClicks:
        type:
          - "null"
          - integer
      eCPAddToCart:
        type:
          - "null"
          - number
      eCPBrandSearch:
        type:
          - "null"
          - number
      endDate:
        type:
          - "null"
          - string
      impressions:
        type:
          - "null"
          - integer
      impressionsFrequencyAverage:
        type:
          - "null"
          - number
      impressionsViews:
        type:
          - "null"
          - integer
      leadFormOpens:
        type:
          - "null"
          - integer
      leads:
        type:
          - "null"
          - integer
      linkOuts:
        type:
          - "null"
          - integer
      newToBrandDetailPageViewClicks:
        type:
          - "null"
          - integer
      newToBrandDetailPageViewRate:
        type:
          - "null"
          - number
      newToBrandDetailPageViews:
        type:
          - "null"
          - integer
      newToBrandDetailPageViewViews:
        type:
          - "null"
          - integer
      newToBrandECPDetailPageView:
        type:
          - "null"
          - number
      newToBrandPurchases:
        type:
          - "null"
          - integer
      newToBrandPurchasesClicks:
        type:
          - "null"
          - integer
      newToBrandSales:
        type:
          - "null"
          - number
      newToBrandSalesClicks:
        type:
          - "null"
          - number
      newToBrandUnitsSold:
        type:
          - "null"
          - integer
      newToBrandUnitsSoldClicks:
        type:
          - "null"
          - integer
      promotedAsin:
        type:
          - "null"
          - string
      promotedSku:
        type:
          - "null"
          - string
      purchases:
        type:
          - "null"
          - integer
      purchasesClicks:
        type:
          - "null"
          - integer
      purchasesPromotedClicks:
        type:
          - "null"
          - integer
      sales:
        type:
          - "null"
          - number
      salesClicks:
        type:
          - "null"
          - number
      salesPromotedClicks:
        type:
          - "null"
          - number
      startDate:
        type:
          - "null"
          - string
      unitsSold:
        type:
          - "null"
          - integer
      unitsSoldClicks:
        type:
          - "null"
          - integer
      videoCompleteViews:
        type:
          - "null"
          - integer
      videoFirstQuartileViews:
        type:
          - "null"
          - integer
      videoMidpointViews:
        type:
          - "null"
          - integer
      videoThirdQuartileViews:
        type:
          - "null"
          - integer
      videoUnmutes:
        type:
          - "null"
          - integer
      viewabilityRate:
        type:
          - "null"
          - number
      viewClickThroughRate:
        type:
          - "null"
          - number
    title: sponsored_display_productads_report_stream
    additionalProperties: true
  sponsored_display_targets_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      targetingId:
        type:
          - "null"
          - integer
      addToCart:
        type:
          - "null"
          - integer
      addToCartClicks:
        type:
          - "null"
          - integer
      addToCartRate:
        type:
          - "null"
          - number
      addToCartViews:
        type:
          - "null"
          - integer
      adGroupId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      addToList:
        type:
          - "null"
          - integer
      addToListFromClicks:
        type:
          - "null"
          - integer
      addToListFromViews:
        type:
          - "null"
          - integer
      qualifiedBorrows:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrows:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      brandedSearches:
        type:
          - "null"
          - integer
      brandedSearchesClicks:
        type:
          - "null"
          - integer
      brandedSearchesViews:
        type:
          - "null"
          - integer
      brandedSearchRate:
        type:
          - "null"
          - number
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      detailPageViews:
        type:
          - "null"
          - integer
      detailPageViewsClicks:
        type:
          - "null"
          - integer
      eCPAddToCart:
        type:
          - "null"
          - number
      eCPBrandSearch:
        type:
          - "null"
          - number
      endDate:
        type:
          - "null"
          - string
      impressions:
        type:
          - "null"
          - integer
      impressionsViews:
        type:
          - "null"
          - integer
      leadFormOpens:
        type:
          - "null"
          - integer
      leads:
        type:
          - "null"
          - integer
      linkOuts:
        type:
          - "null"
          - integer
      newToBrandPurchases:
        type:
          - "null"
          - integer
      newToBrandPurchasesClicks:
        type:
          - "null"
          - integer
      newToBrandSales:
        type:
          - "null"
          - number
      newToBrandSalesClicks:
        type:
          - "null"
          - number
      newToBrandUnitsSold:
        type:
          - "null"
          - integer
      newToBrandUnitsSoldClicks:
        type:
          - "null"
          - integer
      purchases:
        type:
          - "null"
          - integer
      purchasesClicks:
        type:
          - "null"
          - integer
      purchasesPromotedClicks:
        type:
          - "null"
          - integer
      sales:
        type:
          - "null"
          - number
      salesClicks:
        type:
          - "null"
          - number
      salesPromotedClicks:
        type:
          - "null"
          - number
      startDate:
        type:
          - "null"
          - string
      targetingExpression:
        type:
          - "null"
          - string
      targetingText:
        type:
          - "null"
          - string
      unitsSold:
        type:
          - "null"
          - integer
      unitsSoldClicks:
        type:
          - "null"
          - integer
      videoCompleteViews:
        type:
          - "null"
          - integer
      videoFirstQuartileViews:
        type:
          - "null"
          - integer
      videoMidpointViews:
        type:
          - "null"
          - integer
      videoThirdQuartileViews:
        type:
          - "null"
          - integer
      videoUnmutes:
        type:
          - "null"
          - integer
      viewabilityRate:
        type:
          - "null"
          - number
      viewClickThroughRate:
        type:
          - "null"
          - number
    title: sponsored_display_targets_report_stream
    additionalProperties: true
  sponsored_display_asins_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      promotedAsin:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      asinBrandHalo:
        type:
          - "null"
          - string
      addToList:
        type:
          - "null"
          - integer
      addToListFromClicks:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromClicks:
        type:
          - "null"
          - integer
      addToListFromViews:
        type:
          - "null"
          - integer
      qualifiedBorrows:
        type:
          - "null"
          - integer
      qualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrows:
        type:
          - "null"
          - integer
      royaltyQualifiedBorrowsFromViews:
        type:
          - "null"
          - integer
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      conversionsBrandHalo:
        type:
          - "null"
          - integer
      conversionsBrandHaloClicks:
        type:
          - "null"
          - integer
      endDate:
        type:
          - "null"
          - string
      promotedSku:
        type:
          - "null"
          - string
      salesBrandHalo:
        type:
          - "null"
          - integer
      salesBrandHaloClicks:
        type:
          - "null"
          - integer
      startDate:
        type:
          - "null"
          - string
      unitsSoldBrandHalo:
        type:
          - "null"
          - integer
      unitsSoldBrandHaloClicks:
        type:
          - "null"
          - integer
    title: sponsored_display_asins_report_stream
    additionalProperties: true
  sponsored_products_campaigns_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      campaignStatus:
        type:
          - "null"
          - string
      campaignBudgetAmount:
        type:
          - "null"
          - number
      campaignRuleBasedBudgetAmount:
        type:
          - "null"
          - number
      campaignApplicableBudgetRuleId:
        type:
          - "null"
          - string
      campaignApplicableBudgetRuleName:
        type:
          - "null"
          - string
      impressions:
        type:
          - "null"
          - integer
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      purchases1d:
        type:
          - "null"
          - integer
      purchases7d:
        type:
          - "null"
          - integer
      purchases14d:
        type:
          - "null"
          - integer
      purchases30d:
        type:
          - "null"
          - integer
      purchasesSameSku1d:
        type:
          - "null"
          - integer
      purchasesSameSku7d:
        type:
          - "null"
          - integer
      purchasesSameSku14d:
        type:
          - "null"
          - integer
      purchasesSameSku30d:
        type:
          - "null"
          - integer
      unitsSoldClicks1d:
        type:
          - "null"
          - integer
      unitsSoldClicks7d:
        type:
          - "null"
          - integer
      unitsSoldClicks14d:
        type:
          - "null"
          - integer
      unitsSoldClicks30d:
        type:
          - "null"
          - integer
      sales1d:
        type:
          - "null"
          - number
      sales7d:
        type:
          - "null"
          - number
      sales14d:
        type:
          - "null"
          - number
      sales30d:
        type:
          - "null"
          - number
      attributedSalesSameSku1d:
        type:
          - "null"
          - number
      attributedSalesSameSku7d:
        type:
          - "null"
          - number
      attributedSalesSameSku14d:
        type:
          - "null"
          - number
      attributedSalesSameSku30d:
        type:
          - "null"
          - number
      unitsSoldSameSku1d:
        type:
          - "null"
          - integer
      unitsSoldSameSku7d:
        type:
          - "null"
          - integer
      unitsSoldSameSku14d:
        type:
          - "null"
          - integer
      unitsSoldSameSku30d:
        type:
          - "null"
          - integer
    title: sponsored_products_campaigns_report_stream
    additionalProperties: true
  sponsored_products_adgroups_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      impressions:
        type:
          - "null"
          - integer
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      purchases1d:
        type:
          - "null"
          - integer
      purchases7d:
        type:
          - "null"
          - integer
      purchases14d:
        type:
          - "null"
          - integer
      purchases30d:
        type:
          - "null"
          - integer
      purchasesSameSku1d:
        type:
          - "null"
          - integer
      purchasesSameSku7d:
        type:
          - "null"
          - integer
      purchasesSameSku14d:
        type:
          - "null"
          - integer
      purchasesSameSku30d:
        type:
          - "null"
          - integer
      unitsSoldClicks1d:
        type:
          - "null"
          - integer
      unitsSoldClicks7d:
        type:
          - "null"
          - integer
      unitsSoldClicks14d:
        type:
          - "null"
          - integer
      unitsSoldClicks30d:
        type:
          - "null"
          - integer
      sales1d:
        type:
          - "null"
          - number
      sales7d:
        type:
          - "null"
          - number
      sales14d:
        type:
          - "null"
          - number
      sales30d:
        type:
          - "null"
          - number
      attributedSalesSameSku1d:
        type:
          - "null"
          - number
      attributedSalesSameSku7d:
        type:
          - "null"
          - number
      attributedSalesSameSku14d:
        type:
          - "null"
          - number
      attributedSalesSameSku30d:
        type:
          - "null"
          - number
      unitsSoldSameSku1d:
        type:
          - "null"
          - integer
      unitsSoldSameSku7d:
        type:
          - "null"
          - integer
      unitsSoldSameSku14d:
        type:
          - "null"
          - integer
      unitsSoldSameSku30d:
        type:
          - "null"
          - integer
    title: sponsored_products_adgroups_report_stream
    additionalProperties: true
  sponsored_products_keywords_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      keywordId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - integer
      keyword:
        type:
          - "null"
          - string
      matchType:
        type:
          - "null"
          - string
      impressions:
        type:
          - "null"
          - integer
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      purchases1d:
        type:
          - "null"
          - integer
      purchases7d:
        type:
          - "null"
          - integer
      purchases14d:
        type:
          - "null"
          - integer
      purchases30d:
        type:
          - "null"
          - integer
      purchasesSameSku1d:
        type:
          - "null"
          - integer
      purchasesSameSku7d:
        type:
          - "null"
          - integer
      purchasesSameSku14d:
        type:
          - "null"
          - integer
      purchasesSameSku30d:
        type:
          - "null"
          - integer
      unitsSoldClicks1d:
        type:
          - "null"
          - integer
      unitsSoldClicks7d:
        type:
          - "null"
          - integer
      unitsSoldClicks14d:
        type:
          - "null"
          - integer
      unitsSoldClicks30d:
        type:
          - "null"
          - integer
      sales1d:
        type:
          - "null"
          - number
      sales7d:
        type:
          - "null"
          - number
      sales14d:
        type:
          - "null"
          - number
      sales30d:
        type:
          - "null"
          - number
      attributedSalesSameSku1d:
        type:
          - "null"
          - number
      attributedSalesSameSku7d:
        type:
          - "null"
          - number
      attributedSalesSameSku14d:
        type:
          - "null"
          - number
      attributedSalesSameSku30d:
        type:
          - "null"
          - number
      unitsSoldSameSku1d:
        type:
          - "null"
          - integer
      unitsSoldSameSku7d:
        type:
          - "null"
          - integer
      unitsSoldSameSku14d:
        type:
          - "null"
          - integer
      unitsSoldSameSku30d:
        type:
          - "null"
          - integer
    title: sponsored_products_keywords_report_stream
    additionalProperties: true
  sponsored_products_targets_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      keywordId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - integer
      keyword:
        type:
          - "null"
          - string
      targeting:
        type:
          - "null"
          - string
      keywordType:
        type:
          - "null"
          - string
      impressions:
        type:
          - "null"
          - integer
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      purchases1d:
        type:
          - "null"
          - integer
      purchases7d:
        type:
          - "null"
          - integer
      purchases14d:
        type:
          - "null"
          - integer
      purchases30d:
        type:
          - "null"
          - integer
      purchasesSameSku1d:
        type:
          - "null"
          - integer
      purchasesSameSku7d:
        type:
          - "null"
          - integer
      purchasesSameSku14d:
        type:
          - "null"
          - integer
      purchasesSameSku30d:
        type:
          - "null"
          - integer
      unitsSoldClicks1d:
        type:
          - "null"
          - integer
      unitsSoldClicks7d:
        type:
          - "null"
          - integer
      unitsSoldClicks14d:
        type:
          - "null"
          - integer
      unitsSoldClicks30d:
        type:
          - "null"
          - integer
      sales1d:
        type:
          - "null"
          - number
      sales7d:
        type:
          - "null"
          - number
      sales14d:
        type:
          - "null"
          - number
      sales30d:
        type:
          - "null"
          - number
      attributedSalesSameSku1d:
        type:
          - "null"
          - number
      attributedSalesSameSku7d:
        type:
          - "null"
          - number
      attributedSalesSameSku14d:
        type:
          - "null"
          - number
      attributedSalesSameSku30d:
        type:
          - "null"
          - number
      unitsSoldSameSku1d:
        type:
          - "null"
          - integer
      unitsSoldSameSku7d:
        type:
          - "null"
          - integer
      unitsSoldSameSku14d:
        type:
          - "null"
          - integer
      unitsSoldSameSku30d:
        type:
          - "null"
          - integer
    title: sponsored_products_targets_report_stream
    additionalProperties: true
  sponsored_products_productads_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      adId:
        type:
          - "null"
          - integer
      campaignName:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - integer
      impressions:
        type:
          - "null"
          - integer
      clicks:
        type:
          - "null"
          - integer
      cost:
        type:
          - "null"
          - number
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
      advertisedAsin:
        type:
          - "null"
          - string
      purchases1d:
        type:
          - "null"
          - integer
      purchases7d:
        type:
          - "null"
          - integer
      purchases14d:
        type:
          - "null"
          - integer
      purchases30d:
        type:
          - "null"
          - integer
      purchasesSameSku1d:
        type:
          - "null"
          - integer
      purchasesSameSku7d:
        type:
          - "null"
          - integer
      purchasesSameSku14d:
        type:
          - "null"
          - integer
      purchasesSameSku30d:
        type:
          - "null"
          - integer
      unitsSoldClicks1d:
        type:
          - "null"
          - integer
      unitsSoldClicks7d:
        type:
          - "null"
          - integer
      unitsSoldClicks14d:
        type:
          - "null"
          - integer
      unitsSoldClicks30d:
        type:
          - "null"
          - integer
      sales1d:
        type:
          - "null"
          - number
      sales7d:
        type:
          - "null"
          - number
      sales14d:
        type:
          - "null"
          - number
      sales30d:
        type:
          - "null"
          - number
      attributedSalesSameSku1d:
        type:
          - "null"
          - number
      attributedSalesSameSku7d:
        type:
          - "null"
          - number
      attributedSalesSameSku14d:
        type:
          - "null"
          - number
      attributedSalesSameSku30d:
        type:
          - "null"
          - number
      unitsSoldSameSku1d:
        type:
          - "null"
          - integer
      unitsSoldSameSku7d:
        type:
          - "null"
          - integer
      unitsSoldSameSku14d:
        type:
          - "null"
          - integer
      unitsSoldSameSku30d:
        type:
          - "null"
          - integer
    title: sponsored_products_productads_report_stream
    additionalProperties: true
  sponsored_products_asins_keywords_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      advertisedAsin:
        type:
          - "null"
          - string
      campaignName:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - integer
      keywordId:
        type:
          - "null"
          - integer
      keyword:
        type:
          - "null"
          - string
      purchasedAsin:
        type:
          - "null"
          - string
      advertisedSku:
        type:
          - "null"
          - string
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
      matchType:
        type:
          - "null"
          - string
      unitsSoldClicks1d:
        type:
          - "null"
          - integer
      unitsSoldClicks7d:
        type:
          - "null"
          - integer
      unitsSoldClicks14d:
        type:
          - "null"
          - integer
      unitsSoldClicks30d:
        type:
          - "null"
          - integer
      unitsSoldOtherSku1d:
        type:
          - "null"
          - integer
      unitsSoldOtherSku7d:
        type:
          - "null"
          - integer
      unitsSoldOtherSku14d:
        type:
          - "null"
          - integer
      unitsSoldOtherSku30d:
        type:
          - "null"
          - integer
      salesOtherSku1d:
        type:
          - "null"
          - number
      salesOtherSku7d:
        type:
          - "null"
          - number
      salesOtherSku14d:
        type:
          - "null"
          - number
      salesOtherSku30d:
        type:
          - "null"
          - number
    title: sponsored_products_asins_keywords_report_stream
    additionalProperties: true
  sponsored_products_asins_targets_report_stream:
    type:
      - "null"
      - object
    $schema: http://json-schema.org/draft-07/schema#
    properties:
      profileId:
        type:
          - "null"
          - integer
      reportDate:
        type:
          - "null"
          - string
      advertisedAsin:
        type:
          - "null"
          - string
      campaignName:
        type:
          - "null"
          - string
      campaignId:
        type:
          - "null"
          - integer
      adGroupName:
        type:
          - "null"
          - string
      adGroupId:
        type:
          - "null"
          - integer
      purchasedAsin:
        type:
          - "null"
          - string
      advertisedSku:
        type:
          - "null"
          - string
      campaignBudgetCurrencyCode:
        type:
          - "null"
          - string
      matchType:
        type:
          - "null"
          - string
      unitsSoldClicks1d:
        type:
          - "null"
          - integer
      unitsSoldClicks7d:
        type:
          - "null"
          - integer
      unitsSoldClicks14d:
        type:
          - "null"
          - integer
      unitsSoldClicks30d:
        type:
          - "null"
          - integer
      unitsSoldOtherSku1d:
        type:
          - "null"
          - integer
      unitsSoldOtherSku7d:
        type:
          - "null"
          - integer
      unitsSoldOtherSku14d:
        type:
          - "null"
          - integer
      unitsSoldOtherSku30d:
        type:
          - "null"
          - integer
      salesOtherSku1d:
        type:
          - "null"
          - number
      salesOtherSku7d:
        type:
          - "null"
          - number
      salesOtherSku14d:
        type:
          - "null"
          - number
      salesOtherSku30d:
        type:
          - "null"
          - number
      keywordId:
        type:
          - "null"
          - integer
      targeting:
        type:
          - "null"
          - string
      keywordType:
        type:
          - "null"
          - string
    title: sponsored_products_asins_targets_report_stream
    additionalProperties: true
